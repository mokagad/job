name: ci

on:
  workflow_dispatch:
  schedule:
    - cron: "0 */2 * * *" 

jobs:
  ci:
    runs-on: ubuntu-latest
    steps:
      - name: pull image
        run: docker pull ahmedhesham301/jobfit-ai:latest

      - name: checkout
        uses: actions/checkout@v5.0.0

      - name: install gh cli
        run: apt update && apt install gh -y
      
      - name: Create .env file
        run: |
          echo "smtp_email=${{ secrets.SMTP_EMAIL }}" >> .env
          echo "smtp_password=${{ secrets.SMTP_PASSWORD }}" >> .env
          echo "receiver_email=${{ secrets.RECEIVER_EMAIL }}" >> .env
          echo "api_keys=${{ secrets.API_KEYS }}" >> .env
      - name: Run container
        run: docker run --env-file .env ahmedhesham301/jobfit-ai:latest
